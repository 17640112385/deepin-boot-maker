#!/bin/bash

set -x

pushd `dirname $0` > /dev/null
SCRIPTPATH=$(pwd -P)
popd > /dev/null

WORK_PATH=${SCRIPTPATH}
INCLUDE_PATH=${WORK_PATH}/include
LIB_PATH=${WORK_PATH}/lib

function build_vendor {
    vendor=$1
    qmake_params=$2

    mkdir ${WORK_PATH}/src/${vendor}/build || true
    cd ${WORK_PATH}/src/${vendor}/build
    qmake ${qmake_params}
    make -j 4
    INSTALL_ROOT=${WORK_PATH} make install
    cd ${WORK_PATH}
}


#build dtk
build_vendor deepin-tool-kit "-r CONFIG+=staticlib .."
build_vendor libxsys " -r .."
build_vendor smipc " -r .."
